# 关卡编辑器使用指南

## 功能概述

关卡编辑器是一个可视化工具，用于创建和编辑游戏关卡。它提供了直观的拖拽界面和完整的关卡数据管理功能。

## 主要功能

### 1. 关卡数据加载

- **新建关卡**: 点击"新建关卡"按钮创建一个空的5x5网格关卡
- **加载关卡**: 使用文件选择器加载现有的JSON格式关卡数据
- **保存关卡**: 点击"保存关卡"按钮将当前关卡数据输出到控制台

### 2. 箭头工具

右侧工具栏提供四个方向的箭头工具：

- **向上箭头 (↑)**: 创建向上移动的箭头
- **向下箭头 (↓)**: 创建向下移动的箭头
- **向左箭头 (←)**: 创建向左移动的箭头
- **向右箭头 (→)**: 创建向右移动的箭头

### 3. 拖拽添加箭头

1. 从右侧工具栏拖拽箭头到画布上
2. 箭头会自动吸附到网格位置
3. 箭头会根据方向自动设置合适的尺寸

### 4. 删除模式

1. 点击"删除模式"按钮进入删除状态
2. 在删除模式下，所有箭头会显示为红色
3. 点击任意箭头即可删除
4. 再次点击"退出删除模式"返回正常编辑状态

## 技术实现

### 核心组件

- **LevelEditor**: 主编辑器组件，管理整体状态和用户交互
- **EditorGameView**: 编辑器专用的游戏视图类，处理元素管理和网格逻辑
- **Arrow**: 箭头元素类，继承自StaticElement

### 数据结构

关卡数据采用JSON格式，包含以下字段：

```json
{
  "id": 时间戳,
  "rows": 网格行数,
  "cols": 网格列数,
  "elements": [
    {
      "id": "元素ID",
      "type": "arrow",
      "direction": "方向",
      "width": 宽度,
      "height": 高度,
      "position": {"x": X坐标, "y": Y坐标}
    }
  ]
}
```

### 样式特性

- 响应式设计，支持深色模式
- 删除模式下箭头显示为红色
- 拖拽时提供视觉反馈
- 网格自动对齐

## 使用流程

1. **访问编辑器**: 导航到 `/editor` 页面
2. **创建或加载关卡**: 使用工具栏的关卡数据功能
3. **添加箭头**: 从工具栏拖拽箭头到画布
4. **编辑关卡**: 根据需要添加更多箭头
5. **删除元素**: 切换到删除模式删除不需要的箭头
6. **保存关卡**: 完成编辑后保存关卡数据

## 注意事项

- 箭头会自动吸附到网格位置
- 删除模式下所有箭头都会显示为红色
- 关卡数据会自动保存到浏览器控制台
- 支持加载标准的JSON格式关卡文件
